ALTER TABLE permissions CHANGE description description VARCHAR(255) DEFAULT NULL;
ALTER TABLE consultations DROP FOREIGN KEY FK_242D8F538CDE5729;
DROP INDEX IDX_242D8F538CDE5729 ON consultations;
ALTER TABLE consultations ADD patient INT DEFAULT NULL, ADD provider INT DEFAULT NULL, ADD `order` INT DEFAULT NULL, DROP type, CHANGE date_modified date_modified DATETIME DEFAULT NULL;
ALTER TABLE consultations ADD CONSTRAINT FK_242D8F531ADAD7EB FOREIGN KEY (patient) REFERENCES people (id) ON DELETE CASCADE;
ALTER TABLE consultations ADD CONSTRAINT FK_242D8F5392C4739C FOREIGN KEY (provider) REFERENCES people (id) ON DELETE CASCADE;
ALTER TABLE consultations ADD CONSTRAINT FK_242D8F53F5299398 FOREIGN KEY (`order`) REFERENCES people (id) ON DELETE CASCADE;
CREATE INDEX IDX_242D8F531ADAD7EB ON consultations (patient);
CREATE INDEX IDX_242D8F5392C4739C ON consultations (provider);
CREATE INDEX IDX_242D8F53F5299398 ON consultations (`order`);
ALTER TABLE questions CHANGE type type INT DEFAULT NULL, CHANGE date_modified date_modified DATETIME DEFAULT NULL;
ALTER TABLE roles CHANGE description description VARCHAR(255) DEFAULT NULL;
DROP INDEX IDX_DB021E968CDE5729 ON messages;
ALTER TABLE messages ADD sender INT DEFAULT NULL, ADD parent CHAR(36) DEFAULT NULL COMMENT '(DC2Type:uuid)', DROP type, CHANGE date_modified date_modified DATETIME DEFAULT NULL;
ALTER TABLE messages ADD CONSTRAINT FK_DB021E965F004ACF FOREIGN KEY (sender) REFERENCES people (id) ON DELETE CASCADE;
ALTER TABLE messages ADD CONSTRAINT FK_DB021E963D8E604F FOREIGN KEY (parent) REFERENCES messages (id) ON DELETE CASCADE;
CREATE INDEX IDX_DB021E965F004ACF ON messages (sender);
CREATE INDEX IDX_DB021E963D8E604F ON messages (parent);
ALTER TABLE question_types CHANGE template template VARCHAR(255) DEFAULT NULL;
ALTER TABLE answers ADD consultation INT DEFAULT NULL, CHANGE date_modified date_modified DATETIME DEFAULT NULL, CHANGE type type INT DEFAULT NULL;
ALTER TABLE answers ADD CONSTRAINT FK_50D0C606964685A6 FOREIGN KEY (consultation) REFERENCES consultations (id) ON DELETE CASCADE;
ALTER TABLE answers ADD CONSTRAINT FK_50D0C6068CDE5729 FOREIGN KEY (type) REFERENCES question_types (id);
CREATE INDEX IDX_50D0C606964685A6 ON answers (consultation);
ALTER TABLE orders DROP FOREIGN KEY FK_E52FFDEE8CDE5729;
DROP INDEX IDX_E52FFDEE8CDE5729 ON orders;
ALTER TABLE orders ADD person INT DEFAULT NULL, DROP type, CHANGE date_modified date_modified DATETIME DEFAULT NULL;
ALTER TABLE orders ADD CONSTRAINT FK_E52FFDEE34DCD176 FOREIGN KEY (person) REFERENCES people (id) ON DELETE CASCADE;
CREATE INDEX IDX_E52FFDEE34DCD176 ON orders (person);
ALTER TABLE products CHANGE type type INT DEFAULT NULL, CHANGE date_modified date_modified DATETIME DEFAULT NULL, CHANGE strength strength VARCHAR(255) DEFAULT NULL, CHANGE quantity quantity VARCHAR(255) DEFAULT NULL, CHANGE info info VARCHAR(255) DEFAULT NULL, CHANGE price price VARCHAR(255) DEFAULT NULL, CHANGE thumbnail thumbnail VARCHAR(255) DEFAULT NULL;
ALTER TABLE people CHANGE state state VARCHAR(255) DEFAULT NULL, CHANGE date_modified date_modified DATETIME DEFAULT NULL, CHANGE first_name first_name VARCHAR(255) DEFAULT NULL, CHANGE last_name last_name VARCHAR(255) DEFAULT NULL, CHANGE title title VARCHAR(255) DEFAULT NULL, CHANGE credentials credentials VARCHAR(255) DEFAULT NULL, CHANGE address_line_1 address_line_1 VARCHAR(255) DEFAULT NULL, CHANGE address_line_2 address_line_2 VARCHAR(255) DEFAULT NULL, CHANGE city city VARCHAR(255) DEFAULT NULL, CHANGE postal_code postal_code VARCHAR(255) DEFAULT NULL, CHANGE remember_token remember_token VARCHAR(255) DEFAULT NULL;
DROP INDEX IDX_1E9ACECE8CDE5729 ON line_items;
ALTER TABLE line_items ADD `order` INT DEFAULT NULL, ADD product CHAR(36) DEFAULT NULL COMMENT '(DC2Type:uuid)', DROP type;
ALTER TABLE line_items ADD CONSTRAINT FK_1E9ACECEF5299398 FOREIGN KEY (`order`) REFERENCES orders (id) ON DELETE CASCADE;
ALTER TABLE line_items ADD CONSTRAINT FK_1E9ACECED34A04AD FOREIGN KEY (product) REFERENCES products (id);
CREATE INDEX IDX_1E9ACECEF5299398 ON line_items (`order`);
CREATE INDEX IDX_1E9ACECED34A04AD ON line_items (product);
ALTER TABLE states CHANGE id id VARCHAR(255) NOT NULL;
ALTER TABLE provider CHANGE date_modified date_modified DATETIME DEFAULT NULL;
ALTER TABLE accounts CHANGE date_modified date_modified DATETIME DEFAULT NULL, CHANGE date_last_logged_in date_last_logged_in DATETIME DEFAULT NULL, CHANGE password password VARCHAR(255) DEFAULT NULL;
ALTER TABLE prescriptions DROP FOREIGN KEY FK_E41E1AC38CDE5729;
DROP INDEX IDX_E41E1AC38CDE5729 ON prescriptions;
ALTER TABLE prescriptions ADD consultation INT DEFAULT NULL, DROP type, CHANGE product product CHAR(36) DEFAULT NULL COMMENT '(DC2Type:uuid)', CHANGE date_modified date_modified DATETIME DEFAULT NULL;
ALTER TABLE prescriptions ADD CONSTRAINT FK_E41E1AC3964685A6 FOREIGN KEY (consultation) REFERENCES consultations (id) ON DELETE CASCADE;
CREATE INDEX IDX_E41E1AC3964685A6 ON prescriptions (consultation);
DROP INDEX IDX_14CD27B38CDE5729 ON message_receipts;
ALTER TABLE message_receipts ADD message CHAR(36) DEFAULT NULL COMMENT '(DC2Type:uuid)', ADD recipient INT DEFAULT NULL, DROP type, CHANGE date_modified date_modified DATETIME DEFAULT NULL, CHANGE date_seen date_seen DATETIME DEFAULT NULL;
ALTER TABLE message_receipts ADD CONSTRAINT FK_14CD27B3B6BD307F FOREIGN KEY (message) REFERENCES messages (id) ON DELETE CASCADE;
ALTER TABLE message_receipts ADD CONSTRAINT FK_14CD27B36804FB49 FOREIGN KEY (recipient) REFERENCES people (id) ON DELETE CASCADE;
CREATE INDEX IDX_14CD27B3B6BD307F ON message_receipts (message);
CREATE INDEX IDX_14CD27B36804FB49 ON message_receipts (recipient);
